{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const fetchPhotos = async (searchedQuery, currentPage) => {\n  const options = {\n    params: {\n      key: '48346866-c058c3d0a9dd0baa6305ede4b',\n      q: searchedQuery,\n      page: currentPage,\n      per_page: 15,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  };\n\n  return axios.get('https://pixabay.com/api/', options);\n};\n","export const createGalleryCard = imgInfo => {\n  return `<li class=\"gallery-item\">\n  <a href=\"${imgInfo.largeImageURL}\" class=\"gallery-link\"><img src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" width=\"360\" class=\"gallery-img\" loading=\"lazy\"/></a>\n  <ul class=\"gallery-info-list\">\n    <li>\n      <h3>Likes</h3>\n      <p>${imgInfo.likes}</p>\n    </li>\n    <li>\n      <h3>Views</h3>\n      <p>${imgInfo.views}</p>\n    </li>\n    <li>\n      <h3>Comments</h3>\n      <p>${imgInfo.comments}</p>\n    </li>\n    <li>\n      <h3>Downloads</h3>\n      <p>${imgInfo.downloads}</p>\n    </li>\n  </ul>\n</li>`;\n};","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { fetchPhotos } from './js/pixabay-api';\nimport { createGalleryCard } from './js/render-functions';\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nlet galleryItem;\nconst loadMoreBtn = document.querySelector('.load-btn');\nconst loaderCont = document.querySelector('.loader-container');\nconst loader = document.querySelector('.loader');\nlet searchedQuery = '';\nlet page = 1;\nloadMoreBtn.style.display = 'none';\nloaderCont.style.display = 'none';\nconst onScroll = () => {\n  const { height } = galleryItem.getBoundingClientRect();\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n};\n\nconst formSubbmit = async event => {\n  loader.classList.remove('bottom-loader');\n  loaderCont.style.display = 'block';\n  loadMoreBtn.style.display = 'none';\n  gallery.innerHTML = '';\n  event.preventDefault();\n  searchedQuery = event.currentTarget.elements.query.value.trim();\n  if (searchedQuery === '') {\n    loaderCont.style.display = 'none';\n    iziToast.error({\n      title: '',\n      message: 'Please complete the form',\n      messageColor: '#fafafb',\n      icon: 'fas fa-keyboard',\n      iconColor: '#fafafb',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      color: '#fafafb',\n    });\n\n    return;\n  }\n  try {\n    page = 1;\n    const { data } = await fetchPhotos(searchedQuery, page);\n    console.log(data);\n    if (data.total === 0) {\n      gallery.innerHTML = '';\n      iziToast.error({\n        title: '',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#fafafb',\n        icon: 'far fa-file-image',\n        iconColor: '#fafafb',\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        color: '#fafafb',\n      });\n      loaderCont.style.display = 'none';\n      event.target.reset();\n      return;\n    }\n    const galleryTemplate = data.hits.map(el => createGalleryCard(el)).join('');\n    gallery.innerHTML = galleryTemplate;\n\n    if ((data.totalHits > 0) & (page * 15 < data.totalHits)) {\n      loadMoreBtn.style.display = 'block';\n      loadMoreBtn.addEventListener('click', loadMore);\n    }\n    const modal = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captions: true,\n      captionDelay: 250,\n    });\n    modal.refresh();\n  } catch (err) {\n    iziToast.error({\n      message: 'Something wrong',\n      messageColor: '#fafafb',\n      icon: 'fas fa-exclamation-triangle',\n      iconColor: '#fafafb',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      color: '#fafafb',\n    });\n  } finally {\n    loaderCont.style.display = 'none';\n  }\n  event.target.reset();\n};\nconst loadMore = async event => {\n  loaderCont.style.display = 'flex';\n  loader.classList.add('bottom-loader');\n  loadMoreBtn.style.display = 'none';\n  loadMoreBtn.removeEventListener('click', loadMore);\n  try {\n    page++;\n    const { data } = await fetchPhotos(searchedQuery, page);\n    const galleryTemplate = data.hits.map(el => createGalleryCard(el)).join('');\n    gallery.insertAdjacentHTML('beforeend', galleryTemplate);\n    galleryItem = gallery.firstChild;\n    onScroll();\n    const modal = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captions: true,\n      captionDelay: 250,\n    });\n    modal.refresh();\n    if (page * 15 >= data.totalHits) {\n      loadMoreBtn.style.display = 'none';\n      loadMoreBtn.removeEventListener('click', loadMore);\n      iziToast.info({\n        title: '',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        messageColor: '#fafafb',\n        icon: 'fas fa-flag-checkered',\n        iconColor: '#fafafb',\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        color: '#fafafb',\n      });\n    } else loadMoreBtn.style.display = 'block';\n    loadMoreBtn.addEventListener('click', loadMore);\n  } catch (err) {\n    iziToast.error({\n      message: 'Something wrong',\n      messageColor: '#fafafb',\n      icon: 'fas fa-exclamation-triangle',\n      iconColor: '#fafafb',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      color: '#fafafb',\n    });\n  } finally {\n    loaderCont.style.display = 'none';\n  }\n};\nform.addEventListener('submit', formSubbmit);\n"],"names":["fetchPhotos","searchedQuery","currentPage","options","axios","createGalleryCard","imgInfo","form","gallery","galleryItem","loadMoreBtn","loaderCont","loader","page","onScroll","height","formSubbmit","event","iziToast","data","galleryTemplate","el","loadMore","SimpleLightbox"],"mappings":"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"}